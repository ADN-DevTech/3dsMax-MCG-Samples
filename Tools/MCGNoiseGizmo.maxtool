<graph version="0.50" uuid="c5327e9a-ca69-4262-aaed-7fa55fd96e01">
    <meta_info>
        <graph_version guid="74a837ec-f985-4be0-98b1-a05a1a33c655" number="0.0.7" />
        <customui>--*****************************************************************************************************************&#x0A;-- MCG Noise Gizmo Rollout&#x0A;-----------------------------------&#x0A;-- The following rollout template is intended to be copied into the Custom UI definition of an MCG .maxtool file:&#x0A;-- Edit &gt; Edit Graph Properties &gt; Custom UI &gt; Paste this code.&#x0A;-- &#x0A;-- To adapt this template to your own needs, modify the code contained within the &quot;Modifier Creation and Parameter Wiring&quot;&#x0A;-- section below. This rollout template assumes the parameters exposed by your gizmo match the ones defined on the &#x0A;-- modifier (so that they may be wired correctly).&#x0A;--*****************************************************************************************************************&#x0A;rollout params &quot;Parameters&quot; width:160 height:128&#x0A;(&#x09;&#x0A;&#x09;-- Define a  filter function to ensure the pick buttons below can only select geometry.&#x0A;&#x09;fn IsGeometry obj = (superclassof obj == GeometryClass)&#x0A;&#x09;&#x0A;&#x09;-- The string below will be replaced by the auto-generated UI definitions from MCG.&#x0A;&#x09;-- This way, we do not have to redefine the spinners and other UI elements expected by the plugin&apos;s parameter block.&#x0A;&#x09;&lt;&lt;ParamUIDefs&gt;&gt;&#x0A;&#x09;&#x0A;&#x09;-- Add the custom UI elements after the MCG UI definitions.&#x0A;&#x09;pickbutton &apos;updatePickBtn&apos; &quot;Update Box from Object&quot; width:155 height:16 message:&quot;Pick a Mesh&quot; filter:IsGeometry align:#left&#x0A;&#x09;pickbutton &apos;applyPickBtn&apos; &quot;Apply to Object&quot; width:155 height:16 message:&quot;Pick a Mesh&quot; filter:IsGeometry align:#left&#x0A;&#x09;&#x0A;&#x09;-- The string below will be replaced by the auto-generated UI element event handlers from MCG.&#x0A;&#x09;&lt;&lt;RolloutParamsHandlers&gt;&gt;&#x0A;&#x09;&#x0A;&#x09;-- Update the box corners with the given object&apos;s bounding box. This affects how the spline is generated within MCG.&#x0A;&#x09;fn UpdateBoundingBoxParams obj = (&#x0A;&#x09;&#x09;bb = nodeGetBoundingBox obj obj.transform&#x0A;&#x09;&#x09;min_point = bb[1]&#x0A;&#x09;&#x09;max_point = bb[2]&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;minCorner.X = min_point[1]&#x0A;&#x09;&#x09;minCorner.Y = min_point[2]&#x0A;&#x09;&#x09;minCorner.Z = min_point[3]&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;maxCorner.X = max_point[1]&#x0A;&#x09;&#x09;maxCorner.Y = max_point[2]&#x0A;&#x09;&#x09;maxCorner.Z = max_point[3]&#x0A;&#x09;)&#x0A;&#x09;&#x0A;&#x09;-- Apply the modifier to the given object.&#x0A;&#x09;fn ApplyMCGModifier obj = (&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;-- Update the local bounding box parameters.&#x0A;&#x09;&#x09;UpdateBoundingBoxParams obj&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;--*****************************************************************************************************************&#x0A;&#x09;&#x09;-- Modifier Creation and Parameter Wiring                                                                                                               *&#x0A;&#x09;&#x09;--*****************************************************************************************************************&#x0A;&#x09;&#x09;-- Create an instance of the associated modifier.&#x0A;&#x09;&#x09;-- If you are using this file as a template, change this to an instance of your custom modifier&#x0A;&#x09;&#x09;newMod = MCGNoise()&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;-- Wire the current gizmo&apos;s parameters to the modifier&apos;s parameters.&#x0A;&#x09;&#x09;-- If you are using this file as a template, change the parameter wiring below to suit the parameters on your own modifier.&#x0A;&#x09;&#x09;--&#x0A;&#x09;&#x09;-- (!) Note: Due to a recently discovered issue (from Max 2014 through 2017),  paramWire.connect2way causes a crash&#x0A;&#x09;&#x09;-- when a wired object is cloned (this applies to non-MCG objects as well). As a workaround, we&apos;re using the more stable &#x0A;&#x09;&#x09;-- paramWire.connect instead. The limitation is that the modifier&apos;s parameters will now be driven by the gizmo exclusively.&#x0A; &#x09;&#x09;paramWire.connect owningNode.baseObject[#numIterations] newMod[#numIterations] &quot;numIterations&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#roughness] newMod[#roughness] &quot;roughness&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#phase] newMod[#phase] &quot;phase&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#frequency] newMod[#frequency] &quot;frequency&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#scale] newMod[#scale] &quot;scale&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#strengthX] newMod[#strengthX] &quot;strengthX&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#strengthY] newMod[#strengthY] &quot;strengthY&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#strengthZ] newMod[#strengthZ] &quot;strengthZ&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#seed] newMod[#seed] &quot;seed&quot;&#x0A;&#x09;&#x09;--*****************************************************************************************************************&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;-- Add the instance of the modifier&#x0A;&#x09;&#x09;addModifier obj newMod&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;newMod.gizmo = owningNode&#x0A;&#x09;)&#x0A;&#x09;&#x0A;&#x09;-- Apply pick button event handler.&#x0A;&#x09;on applyPickBtn picked obj do&#x0A;&#x09;(&#x0A;&#x09;&#x09;ApplyMCGModifier obj&#x0A;&#x09;)&#x0A;&#x09;&#x0A;&#x09;-- Update pick button event handler.&#x0A;&#x09;on updatePickBtn picked obj do&#x0A;&#x09;(&#x0A;&#x09;&#x09;UpdateBoundingBoxParams obj&#x0A;&#x09;)&#x0A;)</customui>
    </meta_info>
    <nodes>
        <node operator="Parameter: Int32" id="14" name="numSubdivisions" min_value="2" max_value="100" default_value="20" position="560:360" size="140:175" />
        <node operator="Shape: Matrix" id="3" position="1209:689" size="140:91" />
        <node operator="SplineBoxPrimitive" id="2" position="740:260" size="140:154" />
        <node operator="IgnoreSecond" id="17" position="1400:500" size="140:133" />
        <node operator="Output: shape" id="1" position="1580:540" size="140:70" />
        <node operator="NoiseSpline" id="0" position="1220:320" size="140:280" />
        <node operator="MatrixIdentity" id="29" position="1020:360" size="140:91" />
        <node operator="Parameter: Single" id="4" name="scale" min_value="-10000" max_value="10000" default_value="200" system_units_value="false" position="740:1080" size="140:196" />
        <node operator="Parameter: Single" id="10" name="roughness" min_value="0" max_value="1" default_value="0" system_units_value="false" position="740:560" size="140:196" />
        <node operator="Parameter: Single" id="16" name="strengthY" min_value="-10000" max_value="10000" default_value="100" system_units_value="true" position="440:1240" size="140:196" />
        <node operator="Parameter: Single" id="21" name="strengthZ" min_value="-10000" max_value="10000" default_value="100" system_units_value="true" position="580:1240" size="140:196" />
        <node operator="Vector3" id="24" position="740:1280" size="140:154" />
        <node operator="Parameter: Single" id="25" name="frequency" min_value="-10000" max_value="10000" default_value="0.25" system_units_value="false" position="740:900" size="140:196" />
        <node operator="Parameter: Int32" id="26" name="phase" min_value="-10000" max_value="10000" default_value="0" position="740:740" size="140:175" />
        <node operator="Parameter: Int32" id="33" name="seed" min_value="0" max_value="100000" default_value="1234" position="740:1420" size="140:175" />
        <node operator="Parameter: Single" id="34" name="strengthX" min_value="-10000" max_value="10000" default_value="100" system_units_value="true" position="300:1240" size="140:196" />
        <node operator="Parameter: Int32" id="37" name="numIterations" min_value="1" max_value="20" default_value="6" position="740:400" size="140:175" />
        <node operator="Parameter: Vector3" id="15" name="minCorner" min_value="[-1000000,-1000000,-1000000]" max_value="[1000000,1000000,1000000]" default_value="[-10,-10,0]" position="560:0" size="140:175" />
        <node operator="Parameter: Vector3" id="18" name="maxCorner" min_value="[-1000000,-1000000,-1000000]" max_value="[1000000,1000000,1000000]" default_value="[10,10,40]" position="560:180" size="140:175" />
        <node groupnode="Required" id="22" position="1200:600" size="158:189" bg_color="#ffc0c0c0">
            <comment>We need this node to ensure the plugin&apos;s owningNode variable gets instantiated.</comment>
            <nodes>3</nodes>
        </node>
    </nodes>
    <connections>
        <connection sourcenode="15" sourceport="0" destnode="2" destport="0" />
        <connection sourcenode="18" sourceport="0" destnode="2" destport="1" />
        <connection sourcenode="14" sourceport="0" destnode="2" destport="2" />
        <connection sourcenode="0" sourceport="0" destnode="17" destport="0" />
        <connection sourcenode="3" sourceport="0" destnode="17" destport="1" />
        <connection sourcenode="17" sourceport="0" destnode="1" destport="0" />
        <connection sourcenode="2" sourceport="0" destnode="0" destport="0" />
        <connection sourcenode="29" sourceport="0" destnode="0" destport="1" />
        <connection sourcenode="37" sourceport="0" destnode="0" destport="2" />
        <connection sourcenode="10" sourceport="0" destnode="0" destport="3" />
        <connection sourcenode="26" sourceport="0" destnode="0" destport="4" />
        <connection sourcenode="25" sourceport="0" destnode="0" destport="5" />
        <connection sourcenode="4" sourceport="0" destnode="0" destport="6" />
        <connection sourcenode="24" sourceport="0" destnode="0" destport="7" />
        <connection sourcenode="33" sourceport="0" destnode="0" destport="8" />
        <connection sourcenode="34" sourceport="0" destnode="24" destport="0" />
        <connection sourcenode="16" sourceport="0" destnode="24" destport="1" />
        <connection sourcenode="21" sourceport="0" destnode="24" destport="2" />
    </connections>
</graph>
