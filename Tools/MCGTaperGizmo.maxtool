<graph version="0.50" uuid="680ef5da-2130-4ba3-b370-db41dfec40fb">
    <meta_info>
        <graph_version guid="fc914d35-3d53-4337-9a65-bf7aabeca081" number="0.0.49" />
        <customui>--*****************************************************************************************************************&#x0A;-- MCG Taper Gizmo Rollout&#x0A;-----------------------------------&#x0A;-- The following rollout template is intended to be copied into the Custom UI definition of an MCG .maxtool file:&#x0A;-- Edit &gt; Edit Graph Properties &gt; Custom UI &gt; Paste this code.&#x0A;-- &#x0A;-- To adapt this template to your own needs, modify the code contained within the &quot;Modifier Creation and Parameter Wiring&quot;&#x0A;-- section below. This rollout template assumes the parameters exposed by your gizmo match the ones defined on the &#x0A;-- modifier (so that they may be wired correctly).&#x0A;--*****************************************************************************************************************&#x0A;rollout params &quot;Parameters&quot; width:160 height:128&#x0A;(&#x09;&#x0A;&#x09;-- Define a  filter function to ensure the pick buttons below can only select geometry.&#x0A;&#x09;fn IsGeometry obj = (superclassof obj == GeometryClass)&#x0A;&#x09;&#x0A;&#x09;-- The string below will be replaced by the auto-generated UI definitions from MCG.&#x0A;&#x09;-- This way, we do not have to redefine the spinners and other UI elements expected by the plugin&apos;s parameter block.&#x0A;&#x09;&lt;&lt;ParamUIDefs&gt;&gt;&#x0A;&#x09;&#x0A;&#x09;-- Add the custom UI elements after the MCG UI definitions.&#x0A;&#x09;pickbutton &apos;updatePickBtn&apos; &quot;Update Box from Object&quot; width:155 height:16 message:&quot;Pick a Mesh&quot; filter:IsGeometry align:#left&#x0A;&#x09;pickbutton &apos;applyPickBtn&apos; &quot;Apply to Object&quot; width:155 height:16 message:&quot;Pick a Mesh&quot; filter:IsGeometry align:#left&#x0A;&#x09;&#x0A;&#x09;-- The string below will be replaced by the auto-generated UI element event handlers from MCG.&#x0A;&#x09;&lt;&lt;RolloutParamsHandlers&gt;&gt;&#x0A;&#x09;&#x0A;&#x09;-- Update the box corners with the given object&apos;s bounding box. This affects how the spline is generated within MCG.&#x0A;&#x09;fn UpdateBoundingBoxParams obj = (&#x0A;&#x09;&#x09;bb = nodeGetBoundingBox obj obj.transform&#x0A;&#x09;&#x09;min_point = bb[1]&#x0A;&#x09;&#x09;max_point = bb[2]&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;minCorner.X = min_point[1]&#x0A;&#x09;&#x09;minCorner.Y = min_point[2]&#x0A;&#x09;&#x09;minCorner.Z = min_point[3]&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;maxCorner.X = max_point[1]&#x0A;&#x09;&#x09;maxCorner.Y = max_point[2]&#x0A;&#x09;&#x09;maxCorner.Z = max_point[3]&#x0A;&#x09;)&#x0A;&#x09;&#x0A;&#x09;-- Apply the modifier to the given object.&#x0A;&#x09;fn ApplyMCGModifier obj = (&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;-- Update the local bounding box parameters.&#x0A;&#x09;&#x09;UpdateBoundingBoxParams obj&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;--*****************************************************************************************************************&#x0A;&#x09;&#x09;-- Modifier Creation and Parameter Wiring                                                                                                               *&#x0A;&#x09;&#x09;--*****************************************************************************************************************&#x0A;&#x09;&#x09;-- Create an instance of the associated modifier.&#x0A;&#x09;&#x09;-- If you are using this file as a template, change this to an instance of your custom modifier&#x0A;&#x09;&#x09;newMod = MCGTaper()&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;-- Wire the current gizmo&apos;s parameters to the modifier&apos;s parameters.&#x0A;&#x09;&#x09;-- If you are using this file as a template, change the parameter wiring below to suit the parameters on your own modifier.&#x0A;&#x09;&#x09;--&#x0A;&#x09;&#x09;-- (!) Note: Due to a recently discovered issue (from Max 2014 through 2017),  paramWire.connect2way causes a crash&#x0A;&#x09;&#x09;-- when a wired object is cloned (this applies to non-MCG objects as well). As a workaround, we&apos;re using the more stable &#x0A;&#x09;&#x09;-- paramWire.connect instead. The limitation is that the modifier&apos;s parameters will now be driven by the gizmo exclusively.&#x0A; &#x09;&#x09;paramWire.connect owningNode.baseObject[#axis] newMod[#axis] &quot;axis&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#amount] newMod[#amount] &quot;amount&quot;&#x0A;&#x09;&#x09;paramWire.connect owningNode.baseObject[#curve] newMod[#curve] &quot;curve&quot;&#x0A;&#x09;&#x09;--*****************************************************************************************************************&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;-- Add the instance of the modifier&#x0A;&#x09;&#x09;addModifier obj newMod&#x0A;&#x09;&#x09;&#x0A;&#x09;&#x09;newMod.gizmo = owningNode&#x0A;&#x09;)&#x0A;&#x09;&#x0A;&#x09;-- Apply pick button event handler.&#x0A;&#x09;on applyPickBtn picked obj do&#x0A;&#x09;(&#x0A;&#x09;&#x09;ApplyMCGModifier obj&#x0A;&#x09;)&#x0A;&#x09;&#x0A;&#x09;-- Update pick button event handler.&#x0A;&#x09;on updatePickBtn picked obj do&#x0A;&#x09;(&#x0A;&#x09;&#x09;UpdateBoundingBoxParams obj&#x0A;&#x09;)&#x0A;)</customui>
    </meta_info>
    <nodes>
        <node operator="Parameter: Int32" id="4" name="axis" min_value="0" max_value="2" default_value="2" position="1020:620" size="140:175" />
        <node operator="Parameter: Single" id="10" name="amount" min_value="-10" max_value="10" default_value="0" system_units_value="false" position="1020:880" size="140:196" />
        <node operator="Parameter: Int32" id="14" name="numSubdivisions" min_value="2" max_value="100" default_value="20" position="780:640" size="140:175" />
        <node operator="Parameter: Single" id="11" name="curve" min_value="-10" max_value="10" default_value="-2.5" system_units_value="false" position="1020:1060" size="140:196" />
        <node operator="MatrixIdentity" id="16" position="1020:780" size="140:91" />
        <node operator="Output: shape" id="0" position="1660:700" size="140:70" />
        <node operator="SplineBoxPrimitive" id="1" position="1020:480" size="140:154" />
        <node operator="TaperSpline" id="22" position="1280:540" size="140:196" />
        <node operator="Shape: Matrix" id="15" position="1289:849" size="140:91" />
        <node operator="IgnoreSecond" id="18" position="1480:660" size="140:133" />
        <node operator="Parameter: Vector3" id="17" name="minCorner" min_value="[-1000000,-1000000,-1000000]" max_value="[1000000,1000000,1000000]" default_value="[-10,-10,0]" position="780:260" size="140:175" />
        <node operator="Parameter: Vector3" id="19" name="maxCorner" min_value="[-1000000,-1000000,-1000000]" max_value="[1000000,1000000,1000000]" default_value="[10,10,40]" position="780:440" size="140:175" />
        <node groupnode="Required" id="2" position="1280:760" size="158:189" bg_color="#ffc0c0c0">
            <comment>We need this node to ensure the plugin&apos;s owningNode variable gets instantiated.</comment>
            <nodes>15</nodes>
        </node>
    </nodes>
    <connections>
        <connection sourcenode="18" sourceport="0" destnode="0" destport="0" />
        <connection sourcenode="17" sourceport="0" destnode="1" destport="0" />
        <connection sourcenode="19" sourceport="0" destnode="1" destport="1" />
        <connection sourcenode="14" sourceport="0" destnode="1" destport="2" />
        <connection sourcenode="1" sourceport="0" destnode="22" destport="0" />
        <connection sourcenode="4" sourceport="0" destnode="22" destport="1" />
        <connection sourcenode="16" sourceport="0" destnode="22" destport="2" />
        <connection sourcenode="10" sourceport="0" destnode="22" destport="3" />
        <connection sourcenode="11" sourceport="0" destnode="22" destport="4" />
        <connection sourcenode="22" sourceport="0" destnode="18" destport="0" />
        <connection sourcenode="15" sourceport="0" destnode="18" destport="1" />
    </connections>
</graph>
